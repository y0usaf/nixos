{
  config,
  lib,
  ...
}: {
  options.user.gaming.arc-raiders = {
    enable = lib.mkOption {
      type = lib.types.bool;
      default = false;
      description = "Enable Arc Raiders configuration";
    };
  };

  config = lib.mkIf config.user.gaming.arc-raiders.enable {
    usr.files."${lib.removePrefix "${config.user.homeDirectory}/" config.user.paths.steam.path}/steamapps/compatdata/1808500/pfx/drive_c/users/steamuser/AppData/Local/PioneerGame/Saved/Config/WindowsClient/Engine.ini" = {
      clobber = true;
      generator = lib.generators.toINI {};
      value = {
        "/Script/Engine.RendererSettings" = {
          "r.DefaultFeature.AntiAliasing" = "0";
          "r.PostProcessAAQuality" = "0";
          "r.FilmGrain" = "0";
          "r.Tonemapper.GrainQuantization" = "0";
          "r.Tonemapper.Sharpen" = "0";
          "r.VignetteIntensity" = "0";
          "r.NT.Lens.ChromaticAberration.Intensity" = "0";
          "r.SceneColorFringe.Max" = "0";
          "r.SceneColorFringeQuality" = "0";
          "r.DefaultFeature.Bloom" = "0";
          "r.BloomQuality" = "0";
          "r.DefaultFeature.LensFlare" = "0";
          "r.LensFlareQuality" = "0";
          "r.DefaultFeature.MotionBlur" = "0";
          "r.MotionBlurQuality" = "0";
          "r.MotionBlurMax" = "0";
          "r.MotionBlurAmount" = "0";
          "r.DepthOfFieldQuality" = "0";
          "r.EyeAdaptationQuality" = "0";
          "r.DefaultFeature.AmbientOcclusion" = "1";
          "r.MaxAnisotropy" = "16";
          "r.CustomDepth" = "3";
          "r.BasePassForceOutputsVelocity" = "1";
          "r.HZB.BuildAsync" = "1";
          "r.Lumen.DiffuseIndirect.AsyncCompute" = "1";
          "r.Lumen.Reflections.Temporal" = "1";
          "r.Lumen.ScreenProbeGather.AsyncCompute" = "1";
          "r.Lumen.ScreenProbeGather.TemporalFilterProbes" = "1";
          "r.LumenScene.DirectLighting.OffscreenShadowing.TraceMeshSDFs" = "0";
          "r.LumenScene.GPUDrivenUpdate" = "1";
          "r.LumenScene.Lighting.AsyncCompute" = "1";
          "r.LumenScene.MeshCardsPerTask" = "448";
          "r.LumenScene.ParallelUpdate" = "1";
          "r.LumenScene.PrimitivesPerTask" = "448";
          "r.LumenScene.SurfaceCache.AtlasSize" = "2048";
          "r.LumenScene.SurfaceCache.CardCapturesPerFrame" = "150";
          "r.LumenScene.SurfaceCache.Feedback.MinPageHits" = "32.0";
          "r.LumenScene.SurfaceCache.Feedback.UniqueElements" = "2048";
          "r.LumenScene.SurfaceCache.NumFramesToKeepUnusedPages" = "128";
          "r.LumenScene.SurfaceCache.RemovesPerFrame" = "128";
          "r.Nanite.MaterialVisibility" = "1";
          "r.Nanite.MaterialVisibility.Async" = "1";
          "r.Nanite.Streaming.MaxPageInstallsPerFrame" = "32";
          "r.Nanite.LargePageRectThreshold" = "256";
          "r.Nanite.VSMMeshShaderRasterization" = "1";
          "r.Shadow.CacheWPOPrimitives" = "1";
          "r.Shadow.DetectVertexShaderLayerAtRuntime" = "1";
          "r.Shadow.FadeExponent" = "0.75";
          "r.Shadow.TemporalFilter" = "1";
          "r.Shadow.TemporalSampleCount" = "8";
          "r.Shadow.Virtual.Cache.AllocateViaLRU" = "1";
          "r.Shadow.Virtual.Cache.InvalidateUseHZB" = "1";
          "r.Shadow.Virtual.NonNanite.IncludeInCoarsePages" = "0";
          "r.Shadow.Virtual.UseHZB" = "1";
          "r.VT.ParallelFeedbackTasks" = "1";
          "r.VT.CsvStats" = "0";
          "r.IO.VirtualTextures" = "1";
          "r.VRS.ContrastAdaptiveShading" = "0";
          "r.VRS.Enable" = "1";
          "r.VRS.EnableImage" = "1";
          "r.VRS.MaterialAdaptiveShading" = "1";
          "r.VRS.MotionAdaptiveShading" = "1";
          "r.VRS.Tier" = "2";
          "r.Renderer.UseGPUInstancing" = "1";
          "r.SupportAllShaderPermutations" = "0";
          "r.PreTileTextures" = "1";
          "r.D3D.ForceDXC" = "1";
          "r.CompileShadersForDevelopment" = "0";
          "r.CookOutUnusedDetailModeComponents" = "1";
          "r.ShaderPipelineCache.Enabled" = "1";
          "r.ShaderPipelineCache.StartupCache" = "1";
          "r.ShaderPipelineCache.BatchSize" = "30";
          "r.ShaderPipelineCache.BatchTime" = "5";
          "r.ShaderPipelineCache.AsyncCompileRate" = "32";
          "r.ShaderPipelineCache.PrecompileBatchSize" = "30";
          "r.ShaderPipelineCache.PrecompileBatchTime" = "5";
          "r.ShaderPipelineCache.PrecompileFrameTime" = "20";
          "r.ShaderPipelineCache.PreOptimizeEnabled" = "1";
          "r.ShaderLibrary.PrintExtendedStats" = "0";
          "r.PipelineStateCache.AsyncCompileAfterTypes" = "1";
          "r.Shaders.Optimize" = "1";
          "r.Shaders.RemoveUnusedInterpolators" = "1";
          "r.UseAsyncShaderPrecompilation" = "1";
          "r.DistanceFields.ParallelUpdate" = "1";
          "r.InstanceCulling.OcclusionCull" = "1";
          "r.LODFadeTime" = "0.75";
          "r.RendererOverrideVirtualTextureScalabilityGroup" = "0";
          "r.SkyAtmosphere.AerialPerspectiveLUT.FastApplyOnOpaque" = "1";
          "r.TemporalAA.Upsampling" = "0";
        };

        "/Script/D3D12RHI.D3D12Options" = {
          "D3D12.AFRUseFramePacing" = "1";
          "D3D12.AllowPoolAllocateIndirectArgBuffers" = "1";
          "D3D12.AsyncDeferredDeletion" = "1";
          "D3D12.ForceThirtyHz" = "0";
          "D3D12.InsertOuterOcclusionQuery" = "1";
          "D3D12.MaxCommandsPerCommandList" = "20000";
          "D3D12.MaximumFrameLatency" = "3";
          "D3D12.MultithreadedCommandListBuilding" = "1";
          "D3D12.PSO.DiskCache" = "1";
          "D3D12.PSO.DriverOptimizedDiskCache" = "1";
          "D3D12.ResidencyManagement" = "1";
          "D3D12.VRAMBufferPoolDefrag" = "1";
          "D3D12.VRAMBufferPoolDefrag.MaxCopySizePerFrame" = "33554432";
          "D3D12.VRAMTexturePoolDefrag" = "1";
          "D3D12.VRAMTexturePoolDefrag.MaxCopySizePerFrame" = "33554432";
          "D3D12.ZeroBufferSizeInMB" = "16";
        };

        "/Script/Engine.StreamingSettings" = {
          "r.Streaming.AmortizeCPUToGPUCopy" = "1";
          "r.Streaming.BuildTextureStreamingDataOnLoad" = "1";
          "r.Streaming.DefragDynamicBounds" = "1";
          "r.Streaming.FramesForFullUpdate" = "2";
          "r.Streaming.FullyLoadUsedTextures" = "0";
          "r.Streaming.HLODStrategy" = "2";
          "r.Streaming.LimitPoolSizeToVRAM" = "1";
          "r.Streaming.MaxMipLevelReduction" = "0";
          "r.Streaming.MinMipForSplitRequest" = "0";
          "r.Streaming.ParallelRenderAssetsNumWorkgroups" = "4";
          "r.Streaming.PredictiveBoost" = "1";
          "r.Streaming.PredictiveBoostHintSize" = "512";
          "r.Streaming.StressTest.ExtraAsyncLatency" = "0";
          "r.Streaming.UseAsyncRequestsForDDC" = "1";
          "r.Streaming.UseBackgroundThreadPool" = "1";
          "r.Streaming.UseMaterialDataStreaming" = "1";
          "r.Streaming.UseNewMetrics" = "1";
          "r.Streaming.UsePerTextureBias" = "1";
          "r.TextureStreaming" = "1";
          "r.TextureStreaming.DiscardUnusedMips" = "1";
          "r.TextureStreaming.UseBackgroundThreadPool" = "1";
          "r.TextureStreaming.UseDeferredLock" = "1";
          "s.AdaptiveAddToWorld.Enabled" = "1";
          "s.AsyncLoadingThreadEnabled" = "1";
          "s.AsyncLoadingThreadPriority" = "2";
          "s.AsyncLoadingTimeLimit" = "3.0";
          "s.IoDispatcherBufferMemoryMB" = "64";
          "s.IoDispatcherCacheSizeMB" = "2048";
          "s.IoDispatcherDecompressionWorkerCount" = "4";
          "s.MaxIncomingRequestsToStall" = "1";
          "s.MaxLevelRequestsAtOnceWhileInMatch" = "4";
          "s.MaxPrecacheRequestsInFlight" = "8";
          "s.MaxReadyRequestsToStallMB" = "0";
          "s.MinBulkDataSizeForAsyncLoading" = "0";
          "s.PriorityAsyncLoadingExtraTime" = "0.0";
          "s.PriorityLevelStreamingActorsUpdateExtraTime" = "0.0";
          "s.ProcessPrestreamingRequests" = "1";
          "r.IO.UseDirectStorage" = "1";
        };

        "TextureStreaming" = {
          "PoolSizeVRAMPercentage" = "70";
        };

        "ConsoleVariables" = {
          "a.ForceParallelAnimUpdate" = "1";
          "ai.DestroyNavDataInCleanUpAndMarkPendingKill" = "0";
          "AllowAsyncRenderThreadUpdatesDuringGamethreadUpdates" = "0";
          "Async.ParallelFor.YieldingTimeout" = "99";
          "AttemptStuckThreadResuscitation" = "1";
          "AudioThread.BatchAsyncBatchSize" = "256";
          "AudioThread.EnableBatchProcessing" = "1";
          "au.BakedAnalysisEnabled" = "0";
          "au.DisableParallelSourceProcessing" = "0";
          "au.voip.AlwaysPlayVoiceComponent" = "0";
          "bAllowAsynchronousShaderCompiling" = "1";
          "bAllowCompilingThroughWorkerThreads" = "1";
          "bAllowMultiThreadedAnimationUpdate" = "1";
          "bAllowMultiThreadedShaderCompile" = "1";
          "bAllowShaderCompilingWorker" = "1";
          "bAsyncShaderCompileWorkerThreads" = "1";
          "bCanBlueprintsTickByDefault" = "0";
          "bDisableMouseAcceleration" = "1";
          "bEnableMouseSmoothing" = "0";
          "bEnableMultiCoreRendering" = "1";
          "bEnableOptimizedShaderCompilation" = "1";
          "bOptimizeAnimBlueprintMemberVariableAccess" = "1";
          "bOptimizeForLocalShaderBuilds" = "1";
          "bSmoothFrameRate" = "0";
          "bSupportsGPUScene" = "1";
          "bSupportsWaveOperations" = "1";
          "bUseAsyncComputeContext" = "1";
          "bUseBackgroundCompiling" = "1";
          "bViewAccelerationEnabled" = "0";
          "RawMouseInputEnabled" = "1";
          "csv.trackWaitsGT" = "0";
          "csv.trackWaitsRT" = "0";
          "EnableMathOptimisations" = "1";
          "FX.AllowAsyncTick" = "1";
          "FX.BatchAsync" = "1";
          "FX.BatchAsyncBatchSize" = "8";
          "fx.DeferrPSCDeactivation" = "1";
          "fx.Niagara.AsyncCompute" = "1";
          "fx.NiagaraAllowRuntimeScalabilityChanges" = "1";
          "fx.NiagaraDataBufferMinSize" = "2048";
          "gc.AllowParallelGC" = "1";
          "gc.CreateGCClusters" = "1";
          "gc.MultithreadedDestructionEnabled" = "1";
          "GeometryCache.OffloadUpdate" = "1";
          "grass.MaxAsyncTasks" = "8";
          "grass.MaxCreatePerFrame" = "6";
          "grass.MaxInstancesPerComponent" = "49152";
          "grass.MinFramesToKeepGrass" = "60";
          "grass.UseHaltonDistribution" = "1";
          "landscape.RenderNanite" = "1";
          "MaxShaderJobBatchSize" = "150";
          "MaxShaderJobs" = "1000";
          "memory.logGenericPlatformMemoryStats" = "0";
          "niagara.CreateShadersOnLoad" = "1";
          "NumUnusedShaderCompilingThreads" = "2";
          "p.AsyncSceneEnabled" = "1";
          "p.Chaos.PerParticleCollision.ISPC" = "1";
          "p.Chaos.Spherical.ISPC" = "1";
          "p.Chaos.Spring.ISPC" = "1";
          "p.Chaos.TriangleMesh.ISPC" = "1";
          "p.Chaos.VelocityField.ISPC" = "1";
          "p.RemoveFarBodiesFromBVH" = "1";
          "pakcache.CachePerPakFile" = "1";
          "pakcache.MaxBlockMemory" = "384";
          "pakcache.MaxRequestSizeToLowerLevellKB" = "3072";
          "pakcache.MaxRequestsToLowerLevel" = "3";
          "pakcache.NumUnreferencedBlocksToCache" = "20";
          "pakcache.UseNewTrim" = "1";
          "r.AllowAsyncRenderThreadUpdatesDuringGamethreadUpdates" = "0";
          "r.AllowMultiThreadedShaderCreation" = "1";
          "r.AOAsyncBuildQueue" = "1";
          "r.AsyncCompute" = "1";
          "r.AsyncCompute.AdaptiveBuffer" = "1";
          "r.AsyncCompute.ParallelDispatch" = "1";
          "r.AsyncCreateLightPrimitiveInteractions" = "1";
          "r.AsyncPipelineCompile" = "1";
          "r.Bloom.AsyncCompute" = "1";
          "r.D3D.RemoveUnusedInterpolators" = "1";
          "r.DFShadowAsyncCompute" = "1";
          "r.DontLimitOnBattery" = "1";
          "r.EnableAsyncComputeVolumetricFog" = "1";
          "r.EnableMultiThreadedRendering" = "1";
          "r.ForceAllCoresForShaderCompiling" = "1";
          "r.ForceOcclusionQueryBatching" = "1";
          "r.GameThread.PriorityRedirectThreshold" = "3";
          "r.GTSyncType" = "2";
          "r.GraphicsThread.EnableBackgroundThreads" = "1";
          "r.GraphicsThread.UseThreadedDestruction" = "1";
          "r.OneFrameThreadLag" = "1";
          "r.ParallelBasePass" = "1";
          "r.ParallelCulling" = "1";
          "r.ParallelDestruction" = "1";
          "r.ParallelDistanceField" = "1";
          "r.ParallelDistributedScene" = "1";
          "r.ParallelGraphics" = "1";
          "r.ParallelInitViews" = "1";
          "r.ParallelMeshDrawCommands" = "1";
          "r.ParallelMeshMerge" = "1";
          "r.ParallelMeshProcessing" = "1";
          "r.ParallelNavBoundsCalc" = "1";
          "r.ParallelNavBoundsInit" = "1";
          "r.ParallelNavBoundsUpdate" = "1";
          "r.ParallelNavOctreeUpdate" = "1";
          "r.ParallelParticleUpdate" = "1";
          "r.ParallelPhysicsScene" = "1";
          "r.ParallelPhysicsStepAsync" = "1";
          "r.ParallelPostProcessing" = "1";
          "r.ParallelPrePass" = "1";
          "r.ParallelReflectionCaptures" = "1";
          "r.ParallelReflectionEnvironment" = "1";
          "r.ParallelRendering" = "1";
          "r.ParallelRenderUploads" = "1";
          "r.ParallelSceneCapture" = "1";
          "r.ParallelSceneColorGather" = "1";
          "r.ParallelShaderCompile" = "1";
          "r.ParallelTaskShaderCompilation" = "1";
          "r.ParallelTonemapping" = "1";
          "r.ParallelTranslucency" = "1";
          "r.ParallelVelocity" = "1";
          "r.ParallelZPrepass" = "1";
          "r.RDG.AsyncClothTick" = "1";
          "r.RDG.AsyncCompute" = "1";
          "r.RDG.AsyncPipelineCompile" = "1";
          "r.RDG.ParallelExecute" = "1";
          "r.RDG.ParallelUpdateRenderGraph" = "1";
          "r.RenderThread.EnableTaskGraphThread" = "1";
          "r.RenderThread.Priority" = "2";
          "r.RHICmdBuffer.EnableThreadedCompletion" = "1";
          "r.RHICmdBypass" = "0";
          "r.RHICmdUseParallelAlgorithms" = "1";
          "r.RHICmdUseThread" = "1";
          "r.RHIThread" = "1";
          "r.RHIThread.Priority" = "2";
          "r.RHI.UseParallelDispatch" = "1";
          "r.SceneRenderingThreadAffinity" = "-1";
          "r.ShaderCompiler.AllowDistributedCompilation" = "0";
          "r.ThreadedShaderCompilation" = "1";
          "r.ThreadPool.BackgroundThreadPriority" = "0";
          "r.ThreadPool.EnableBackgroundThreads" = "1";
          "r.ThreadPool.EnableHighPriorityThreads" = "1";
          "r.Threading.AllowWorkerThreadStall" = "0";
          "r.Threading.ThreadPriority" = "3";
          "r.UniformBufferPooling" = "1";
          "r.UseMultiThreadedRendering" = "1";
          "r.Visibility.FrustumCull.UseSphereTestFirst" = "1";
          "r.Visibility.TaskSchedule" = "0";
          "TaskGraph.Enable" = "1";
          "TaskGraph.ForkedProcessMaxWorkerThreads" = "4";
          "TaskGraph.NumForegroundWorkers" = "-1";
          "TaskGraph.NumWorkerThreads" = "-1";
          "TaskGraph.PrintBroadcastWarnings" = "0";
          "t.MaxFPS" = "0";
          "UseAllCores" = "1";
          "vm.OptimizeVMByteCode" = "1";
          "WorkerThreadPriority" = "0";
        };
      };
    };
  };
}
